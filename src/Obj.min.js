var Obj,Objs={};!function(){function e(){do var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,r="x"==t?e:3&e|8;return r.toString(16)});while(t.indexOf(e)>-1);return e}function r(t){if("function"==typeof t)return t;if("string"==typeof t){if(void 0!=window[t]&&"function"==typeof window[t])return window[t];try{return new Function(t)}catch(e){}}return function(){return t}}var t=[];Obj=function(){this.guid=e(),this._handlers=[],this.on=function(t,e,r){for(var i="all",n=null,s=0,a=0;a<arguments.length;a++)"string"==typeof arguments[a]?i=arguments[a].toLowerCase().split(" "):arguments[a]instanceof Array?i=$.map(arguments[a],function(t,e){return t.toLowerCase()}):"function"==typeof arguments[a]?n=arguments[a]:"number"==typeof arguments[a]&&(s=arguments[a]);if(!n)return this;for(var a=0;a<i.length;a++)this._handlers.push({event:i[a],handler:n,max_count:s,trigger_count:0});return this},this.off=function(t,e){if(void 0===e&&"function"==typeof t)for(var e=t,r=0;r<this._handlers.length;r++)this._handlers[r].handler==e&&this._handlers.splice(r--,1);else if(void 0===e&&"string"==typeof t){t=t.toLowerCase().split(" ");for(var r=0;r<this._handlers.length;r++)t.indexOf(this._handlers[r].event)>-1&&this._handlers.splice(r--,1)}else{t=t.toLowerCase().split(" ");for(var r=0;r<this._handlers.length;r++)t.indexOf(this._handlers[r].event)>-1&&this._handlers[r].handler==e&&this._handlers.splice(r--,1)}return this},this.trigger=function(t,e){t=t.toLowerCase().split(" ");for(var i=0;i<this._handlers.length;i++)(t.indexOf(this._handlers[i].event)>-1||"all"==this._handlers[i].event)&&r(this._handlers[i].handler).call(this,this._handlers[i].event,e);return this},this._elements=$(),this.renderer=function(){var t=$("<div class='Obj'></div>");for(var e in this)0==e.indexOf("_")&&-1==["_handlers","_elements"].indexOf(e)&&t.append("<div class='Obj-member'><div class='Obj-member-key'>"+e.substr(1)+"</div><div class='Obj-member-value'>"+this[e]+"</div></div>");return t},this.refresher=function(t){return this.renderer.apply(this)},this.destroyer=function(t){},this.render=function(t,e){var r=this;if(void 0===t)var t="body";if(void 0===e)var e="append";else e=e.toLowerCase();var i=[].slice.call(arguments,2),n=this;return $(t).each(function(t,s){s=$(s);var a=$(r.renderer.apply(r,i));a.attr("guid",r.guid),r._elements=r._elements.add(a),"append"==e?s.append(a):"prepend"==e?s.prepend(a):"after"==e?s.after(a):"before"==e?s.before(a):"return"==e?n=a:"replace"==e&&(s.after(a),s.remove())}),this.trigger("render"),n},this.refresh=function(t){for(var e=$(),r=0;r<this._elements.length;r++){var i=this._elements.eq(r),n=this.refresher.call(this,i,t);n?(n.attr("guid",this.guid),this._elements=this._elements.not(i),i.after(n),i.remove(),e=e.add(n)):e=e.add(i)}return this._elements=e,this},this.destroy=function(){var t=this;return this._elements.each(function(e,r){var i=$(r);t.destroyer.call(t,i)}),this._elements.remove(),this._elements=$(),delete Objs[this.guid],this},this.defMember=function(t,e,r,i){for(var s=["handlers","on","off","trigger","elements","render","renderer","refresh","refresher","destroy","destroyer","defMember","defSettings","defMethod","guid"],a=0;s>a;a++)if(s[a]==t||"_"+s[a]==t)return!1;this["_"+t]=void 0===e?null:e,Object.defineProperty(this,t,{get:function(){var e=this["_"+t];return i&&(e=i(e)),this.trigger("get"+t+" "+t,e),e},set:function(e){if(r){var i=r(e);void 0!==i&&(e=i)}this["_"+t]=e,this.trigger("set"+t+" "+t,e),this.refresh(t)}})},this.defSettings=function(t){if(void 0===t)var t={};return this.defMember("settings",t,function(t){return $.extend(this._settings,t)})},this.defMethod=function(t,e){var r=this;this["_"+t]=e,this[t]=function(){var e=r["_"+t].call(r,arguments);return r.trigger(t,arguments),e}},Objs[this.guid]=this}}();